@using MoeKinoWebApp.Models
@{
    Layout = "_Layout";
}

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@model MovieListViewModel

<!-- Фильтры -->
<div class="container mt-4">
    <form method="get" asp-action="MovieList">
        <div class="form-row">
            <div class="form-group col-md-3">
                <label for="releaseYear">Release Year</label>
                <select id="releaseYear" name="releaseYear" class="form-control">
                    <option value="">All Years</option>
                    @foreach (var year in Model.Years)
                    {
                        <option value="@year">@year</option>
                    }
                </select>
            </div>
            <div class="form-group col-md-3">
                <label for="genre">Genre</label>
                <select id="genre" name="genre" class="form-control">
                    <option value="">All Genres</option>
                    @foreach (var genre in Model.Genres)
                    {
                        <option value="@genre.NameEn">@genre.NameEn</option>
                    }
                </select>
            </div>
            <div class="form-group col-md-3">
                <label for="country">Country</label>
                <select id="country" name="country" class="form-control">
                    <option value="">All Countries</option>
                    @foreach (var country in Model.Countries)
                    {
                        <option value="@country.NameEn">@country.NameEn</option>
                    }
                </select>
            </div>
            <div class="form-group col-md-3">
                <label for="search">Search</label>
                <input type="text" id="search" name="search" class="form-control" placeholder="Search by title">
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Filter</button>
    </form>
</div>

<!-- Список фильмов -->
<div class="container mt-4">
    @foreach (var movie in Model.Movies)
    {
        <div class="card mb-4">
            <img class="card-img-top" src="data:image/jpeg;base64,@movie.Poster" alt="@movie.Title">
            <div class="card-body">
                <h5 class="card-title">@movie.Title</h5>
                <p class="card-text">@movie.Description</p>
                <p class="card-text"><small class="text-muted">Release Year: @movie.ReleaseYear</small></p>
                <p class="card-text"><small class="text-muted">Genres: @string.Join(", ", movie.Genres.Select(g => g.NameEn))</small></p>
                <p class="card-text"><small class="text-muted">Countries: @string.Join(", ", movie.Countries.Select(c => c.NameEn))</small></p>
                <a href="@Url.Action("MovieDetails", "MovieList", new { id = movie.Id })" class="btn btn-primary">View Details</a>
            </div>
        </div>
    }
</div>
